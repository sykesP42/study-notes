# 网络边缘

## 一、网络边缘概述

### 1. 什么是网络边缘？
- **定义**：由所有主机（端系统）及其上运行的分布式应用进程构成的子系统。
- **组成设备**：
  - **传统设备**：PC机、服务器
  - **智能设备**：智能手机、智能冰箱、物联网设备等
- **核心特征**：
  - 位于网络逻辑的“边缘”
  - 可形象地视为“方形容器设备”
  - 是**网络存在的根本理由**，支撑着各种网络应用（如电子商务、电子政务等）

### 2. 互联网的三大子系统

#### 1）网络边缘
- **功能定位**：
  - 承载各类网络应用（如游戏、电商、社交等）
  - 通过底层协议栈支撑应用间的通信
- **与基础设施的关系**：
  - 应用层及以上属于**网络应用**
  - 应用层以下（包括主机系统）属于**通信基础设施**
- **通信特点**：
  - 分布式应用进程间通过**报文交换**实现功能
  - 需要接入网络核心才能实现全局通信

#### 2）接入网
- **核心功能**：
  - 连接边缘系统与网络核心的桥梁
  - 实现**“最后一公里”**接入
- **物理形态**：
  - 有线接入（如光纤、同轴电缆）
  - 无线接入（如移动网络、WiFi）
- **技术特点**：
  - 避免全连接拓扑（n个节点需要 `n(n-1)/2` 条链路，不现实）
  - 通过**复用技术**提高链路利用率

#### 3）网络核心
- **本质功能**：全球规模的数据交换系统，实现任意两端系统间的通信连接。
- **工作原理**：
  - 由路由器/交换机构成分布式系统
  - 通过协作完成数据路由转发
- **关键特征**：
  - 交换效果等效于 **“瞬时切换开关”**
  - 实际采用分层网络结构（本地 → 区域 → 全球）
- **规模数据**：
  - 全球包含数百万交换节点
  - 支持百亿级设备互联

---

## 二、网络边缘的通信模式

### 1. 客户端-服务器模式

- **基本概念**：网络边缘端系统间的主要通信方式，其中**客户端**向**服务器**请求并接收服务。
- **典型示例**：
  - Web浏览器（客户端） ↔ Web服务器
  - 电子邮件客户端 ↔ 邮件服务器
- **角色特征**：
  - **服务器**：
    - 先启动运行，守候在特定端口等待请求
    - 提供硬件资源（计算能力）、软件资源（业务处理能力）和数据资源（数据库查询）
  - **客户端**：
    - 后启动运行，主动发起请求
    - 如电子商务购物时向服务器发起交易请求
- **交互特点**：
  - 服务器是**被动的响应者**（“守候等待”）
  - 客户端是**主动的请求者**（“发出请求”）
  - 所有核心资源集中在服务器端（“资源在父亲”）
- **系统缺陷**：
  - **可扩展性问题**：当客户端数量超过阈值时，服务能力会断崖式下降
  - **可靠性风险**：集中式架构导致**单点故障**影响范围大（如阿里服务器宕机导致交易中断）

### 2. 对等模式

- **基本概念**：每个节点**既是客户端又是服务器**，没有专门的服务器存在。
- **典型应用**：
  - 文件共享系统：Gnutella、KaZaA、Emule
  - 下载工具：迅雷、电驴
- **工作原理**：
  - 每个peer节点可以同时提供和请求资源
  - 文件被分割成多个片段进行分布式传输
  - 通过多路径并行下载实现**带宽聚集**
- **优势体现**：
  - **负载均衡**：请求节点越多，则服务节点也同步增加
  - **性能提升**：相比FTP单服务器模式下载速度更快
  - **可靠性增强**：无中心节点避免单点故障
- **技术特点**：
  - **动态角色转换**：同一节点在不同会话中分别充当客户端/服务器
  - **资源分布式存储**：文件片段分散在多个节点
  - **自扩展特性**：系统规模扩大自动提升服务能力

---

## 三、网络边缘的服务类型

### 1. 面向连接服务：TCP

- **基本概念**：TCP（传输控制协议）是面向连接的端到端传输协议，提供**可靠的数据传输服务**。
- **连接建立**：采用**“三次握手”**机制，在数据传输前建立连接状态并分配资源（缓冲区、控制变量、定时器等）。
- **核心特性**：
  - **可靠性**：通过确认重传、数据编号、缓存机制实现“不错不丢不重复不失序”的传输效果
  - **流量控制**：动态协调发送速率与接收方处理能力，防止接收方被淹没
  - **拥塞控制**：感知网络路径状态，在链路拥塞时自动降低发送速率
- **协议特点**：连接状态仅由端系统维护，网络中间节点不维护状态。
- **实现原理**：
  - 通过空间资源（缓存区）、时间资源（定时器）和协议复杂度换取可靠性
  - 采用**rdt（可靠数据传输）**机制将下层不可靠服务转化为可靠服务
- **典型场景**：适用于对可靠性要求高的应用（如Web、文件传输、邮件等）

### 2. 无连接服务：UDP

- **基本概念**：UDP（用户数据报协议）是无连接的传输协议。
- **基本特性**：
  - **无连接**：通信前无需握手，直接发送数据报
  - **不可靠**：不保证数据传输的可靠性（可能丢失、乱序）
  - **无控制**：不提供流量控制和拥塞控制机制
- **适用场景**：
  - 实时多媒体应用（流媒体、视频会议）：可容忍丢包但要求低延迟
  - 事务型应用（DNS查询）：短时交互避免连接建立开销
  - 周期性采样数据：单次丢失不影响整体效果
- **设计优势**：
  - 协议简单，处理开销小
  - 传输延迟低，适合实时应用
  - 发送速率与数据产生速率自然匹配
- **与TCP对比**：
  - TCP像“谨慎的py大神”，UDP像“高效的游神”
  - TCP适合“质量优先”场景，UDP适合“时效优先”场景
  - 应用选择取决于具体需求特征，无绝对优劣之分

---

## 四、知识小结

| 知识点           | 核心内容                                       | 考试重点/易混淆点            | 难度系数  |
| ------------- | ------------------------------------------ | -------------------- | ----- |
| **互联网的组成结构**  | 分为边缘系统（主机及应用）、核心系统（交换节点与链路）、接入系统（连接边缘与核心）  | 边缘系统与核心系统的功能区分       | ★★★   |
| **客户端-服务器模式** | 主从架构，服务器提供资源，客户端请求资源；存在可扩展性和可靠性问题          | CS模式与P2P模式的区别        | ★★★   |
| **P2P模式**     | 对等体既是客户端又是服务器，分布式资源共享（如迅雷、电驴）；解决CS模式的扩展性问题 | P2P的带宽聚集优势           | ★★★   |
| **TCP服务特性**   | 面向连接、可靠传输、流量控制、拥塞控制                        | TCP如何实现可靠性（编号、确认、重传） | ★★★★★ |
| **UDP服务特性**   | 无连接、不可靠、无流量/拥塞控制；适用于实时多媒体和事务性应用            | UDP的适用场景与TCP对比       | ★★★★  |
| **网络核心的作用**   | 全球数据交换（类似分布式大交换机），由路由器和链路协作实现              | 核心系统与边缘系统的交互逻辑       | ★★★   |
| **接入网形式**     | 有线/无线链路，将边缘主机接入网络核心                        | 不同接入技术的媒体形式          | ★★    |
| **应用层通信模式**   | CS模式（集中式资源）vs P2P模式（分布式资源）                 | 两种模式的性能瓶颈对比          | ★★★★★ |
